---
title: 开发流程
---

# 开发流程

## 环境准备

环境要求 nodejs>=18，pnpm>=9

全局安装 czg：`pnpm add -g czg`

拉取项目后，执行`pnpm install`或`pnpm bootstrap`安装依赖。因为是 monorepo 项目，所以必须使用pnpm

## 编写组件

开始编写新组件之前，需要拉一个新分支，main分支是保护分支，不能直接提交代码

### 1、创建组件

运行 `pnpm create` 命令，根据提示输入组件标签名称、中文名称，选择组件类别，即可生成组件相关文件：包括组件源码、测试文件、样式文件、文档、组件示例等。

### 2、编写组件

在组件源码中，编写组件的逻辑代码，样式代码等。

启动组件开发示例项目：`pnpm dev`，启动成功后可以打开一个专门用来展示组件的页面

在示例项目中，引用编写好的组件，查看组件效果及调试功能。

> 在组件开发示例项目中，已经全局引入了element-plus组件库、样式、图标，全局引入了kd-elp组件库，并准备了一些静态资源和数据，所以在组件开发过程中，可以直接使用，无需再次引入。

### 3、编译组件

组件开发基本完成后，可以运行 `pnpm build` 进行构建，这个过程中会对组件中的类型定义、语法等进行检查，如果出现问题，可以即时调整，并重复此过程

### 4、编写测试用例

在组件目下的 `__tests__` 目录下编写组件测试用例，尽可能多的覆盖主要功能（这个过程可以完全由 AI 来完成）

然后运行测试用例，并查看测试结果，尽量保证测试覆盖率达到90%以上（因为是业务组件库，有些特殊的场景依赖环境，无法进行独立测试）

### 5、编写组件文档

待测试用例通过后，编写组件文档，包括组件的使用说明、示例代码、API等

如果没有意外，可以把开发过程中示例项目中的代码直接复制到文档的代码示例中

执行`pnpm docs`，可以本地启动组件文档项目，以查看文档效果

### 6、提交代码

执行`pnpm commit`命令，根据提示输入提交信息，即可提交代码

然后可以发起 `pull request`，等待主分支审核代码后合并入主分支
