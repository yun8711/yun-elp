# 国际化指南

KD-ELP 组件库提供了国际化功能，使您可以轻松地在不同语言环境下使用组件。目前支持简体中文和英文，并且默认使用简体中文。

## 基本使用

### 不使用国际化

如果您不需要国际化，只需正常引入组件库即可，默认将使用简体中文：

```js
import { createApp } from 'vue';
import KdElp from 'kd-elp';
import 'kd-elp/style';
import App from './App.vue';

const app = createApp(App);
app.use(KdElp);
app.mount('#app');
```

### 使用全局国际化配置

使用 `KdElpConfigProvider` 组件包裹您的应用，并指定语言：

```vue
<template>
  <kd-elp-config-provider locale="en-US">
    <App />
  </kd-elp-config-provider>
</template>

<script setup>
import { KdElpConfigProvider } from 'kd-elp';
import App from './App.vue';
</script>
```

## 支持的语言

目前 KD-ELP 支持以下语言：

- 简体中文 (zh-CN) - 默认
- 英文 (en-US)

## 在 Vue 应用中使用

### 基于 Vue 的国际化配置

KD-ELP 的国际化与 Element Plus 的国际化系统完全兼容。如果您的应用已经使用了 Element Plus 的国际化，只需要将 KD-ELP 的语言包合并到现有的语言包中：

```js
import { createApp } from 'vue';
import { createI18n } from 'vue-i18n';
import ElementPlus from 'element-plus';
import KdElp, { locales } from 'kd-elp';
import 'kd-elp/style';
import App from './App.vue';

// 创建 i18n 实例
const i18n = createI18n({
  locale: 'zh-CN',
  messages: {
    'zh-CN': {
      // 您自己的翻译
      message: {
        hello: '你好，世界！'
      },
      // 合并 KD-ELP 的翻译
      ...locales['zh-CN']
    },
    'en-US': {
      message: {
        hello: 'Hello world!'
      },
      ...locales['en-US']
    }
  }
});

const app = createApp(App);
app.use(i18n);
app.use(ElementPlus, {
  locale: locales[i18n.global.locale.value]
});
app.use(KdElp);
app.mount('#app');
```

### 动态切换语言

您可以使用 `setLocale` 方法动态切换语言：

```js
import { setLocale } from 'kd-elp';

// 切换到英文
setLocale('en-US');

// 切换回中文
setLocale('zh-CN');
```

## 在组件中使用

KD-ELP 提供了 `useLocale` 钩子，方便您在自定义组件中使用国际化：

```vue
<template>
  <div>
    <p>{{ t('kdelp.common.confirm') }}</p>
    <p>{{ t('kdelp.common.cancel') }}</p>
  </div>
</template>

<script setup>
import { useLocale } from 'kd-elp';

const { t } = useLocale();
</script>
```

### 带参数的翻译

您也可以使用带参数的翻译：

```vue
<template>
  <p>{{ t('welcome', { name: 'John' }) }}</p>
</template>

<script setup>
import { useLocale } from 'kd-elp';

const { t } = useLocale();
</script>
```

对应的语言包：

```js
{
  welcome: '欢迎 {name}！';
}
```

## 自定义语言包

如果您需要添加新的语言支持，可以创建自定义语言包：

```js
import { createApp } from 'vue';
import { locales } from 'kd-elp';
import KdElp from 'kd-elp';
import 'kd-elp/style';
import App from './App.vue';

// 创建自定义语言包
const jaJP = {
  // 扩展 Element Plus 的语言包
  ...elementJaJP,
  // 添加 KD-ELP 特有的翻译
  kdelp: {
    common: {
      confirm: '確認',
      cancel: 'キャンセル'
      // ...其他翻译
    },
    button: {
      loading: '読み込み中'
      // ...其他翻译
    }
  }
};

// 添加到 KD-ELP 的语言包集合
locales['ja-JP'] = jaJP;

const app = createApp(App);
app.use(KdElp);
app.mount('#app');
```

然后使用新添加的语言：

```vue
<template>
  <kd-elp-config-provider locale="ja-JP">
    <App />
  </kd-elp-config-provider>
</template>
```

## 与其他国际化库集成

KD-ELP 的国际化系统易于与其他常见的国际化库集成：

### 与 vue-i18n 集成

```js
import { createApp } from 'vue';
import { createI18n } from 'vue-i18n';
import KdElp, { locales, KdElpConfigProvider } from 'kd-elp';

const i18n = createI18n({
  // ...配置
});

const app = createApp({
  // ...
  setup() {
    const { locale } = useI18n();

    // 监听语言变化
    watch(locale, newLocale => {
      // 根据 vue-i18n 的语言，设置 KD-ELP 的语言
      if (locales[newLocale]) {
        setLocale(newLocale);
      }
    });

    return { locale };
  },
  // 在模板中使用
  template: `
    <kd-elp-config-provider :locale="locale">
      <router-view />
    </kd-elp-config-provider>
  `
});
```
